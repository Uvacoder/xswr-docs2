# Getting started

## Preparing your app

### Installation

```bash
npm i @hazae41/xswr
```

### Provider 

You just have to wrap your app in a `XSWR.CoreProvider` component.

```tsx
function MyWrapper() {
  return <XSWR.CoreProvider>
    <MyAwesomeApp />
  </XSWR.CoreProvider>
}
```

You can also partition your app using multiple providers and storages.

## Your first sandwich

When using xswr and its composition-based hooks, you create a sandwich and only include the ingredients you want.

This shows a simple and complete way of doing a request on `/api/data` using JSON, display it with a loading, and automatically refetch it.

Create a fetcher for your request

```tsx
async function fetchAsJson<T>(url: string) {
  const res = await fetch(url)
  const data = await res.json() as T
  return { data }
}
```

Then create your hook using `useSingle` (or `useScroll`) and some other hooks you like

```tsx
function useMyData() {
  const handle = XSWR.useSingle<MyData>(`/api/data`, fetchAsJson)
  
  XSWR.useFetch(handle) // Fetch on mount and on url change
  XSWR.useVisible(handle) // Fetch when the page becomes visible
  XSWR.useOnline(handle) // Fetch when the browser becomes online
  return handle
}
```

Now you can use it in your component

```tsx
function MyApp() {
  const { error, data } = useMyData()

  if (error)
    return <MyError error={error} />
  if (!data)
    return <MyLoading />
  return <MyPage data={data} />
}
```
