# Cursor-based pagination

You can use `useScroll` to scroll through a cursor-based resource.

```tsx
XSWR.useScroll(scroller, fetcher, cooldown?, timeout?)
```

### Scroller function

A scroller function uses the previous page data and returns the next page key.

```tsx
type Scroller<D = any, K = any> = (previous?: D) => K | undefined
```

The scroller must be memoized as it acts like a key, you can create one with a `useCallback` or use a top-level function.

### Example

```tsx
function useMyData() {
  const scroller = useCallback((previous?: MyData) => {
    if (!previous)
      return `/api/hello` // <--- no previous data = first page
    if (!previous.after)
      return undefined // <--- no after cursor = last page
    return `/api/hello?after=${previous.after}`
  }, [])

  const handle = XSWR.useScroll<MyData>(
    scroller, 
    fetchAsJson)
  XSWR.useFetch(handle) // <-- all hooks are compatible with useScroll
  return handle
}
```

`handle.scroll()` will fetch the next page.

`handle.refetch()` will refetch the first page (next pages will be discarded if the first page changed).