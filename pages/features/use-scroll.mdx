# Cursor-based pagination

You can use scroll to scroll through a cursor-based resource.

```tsx
XSWR.scroll(scroller, fetcher, cooldown?, timeout?)
```

```tsx
XSWR.useScroll(scroller, fetcher, cooldown?, timeout?)
```

### Behaviour

`handle.scroll()` will fetch the next page.

`handle.fetch()` will fetch the first page (next pages will be discarded if the first page changed).

### Scroller function

A scroller function uses the previous page data and returns the next page key.

```tsx
type Scroller<D = any, K = any> = (previous?: D) => K | undefined
```

If you use `useScroll`, the scroller must be memoized as it acts like a key, you can create one with a `useCallback` or use a top-level function.

### Example

```tsx
function getHelloSchema() {
  return XSWR.scroll((previous?: MyData) => {
    if (!previous)
      return `/api/hello` // <--- no previous data = first page
    if (!previous.after)
      return undefined // <--- no after cursor = last page
    return `/api/hello?after=${previous.after}`
  }, fetchAsJson)
}

function useHello() {
  const handle = XSWR.use(getHelloSchema, [])

  XSWR.useFetch(handle) // <-- all blocks are compatible
  return handle
}
```