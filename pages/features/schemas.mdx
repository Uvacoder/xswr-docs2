# Schemas and imperative code

You can define a schema for a resource in order to use it in multiple hooks AND make objects from it.

```tsx
function getCatSchema(id: string) {
  return XSWR.single(["/api/cat", id], fetchAsJson)
}
```

## Using schemas in hooks 

You can use a schema in a hook with `XSWR.use(factory, deps)`. 

It works like useMemo, but deps are passed to the factory.

```tsx
function useCat(id: string) {
  const handle = XSWR.use(getCatSchema, [id])
  useAutoFetchMixture(handle)
  return handle
}
```

## Making objects from schemas

You can also instanciate a schema in order to fetch or mutate it.

You can either call `schema.make(core, params)` from non-React world.

```tsx
function mutateSomeCat(id: string, core: XSWR.Core, params: XSWR.Params) {
  const object = getCatSchema(id).make(core, params)
  await object.mutate({ data: "hello world" })
  await object.fetch()
}
```

Or use `useXSWR().make(schema)` from a component to pass `core` and `params` automatically.

```tsx
function SomeButton() {
  const { make } = XSWR.useXSWR()

  const doSomething = useCallback(async () => {
    const object = make(getCatSchema("123"))
    await object.mutate({ data: "hello world" })
    await object.fetch()
  }, [make])

  return <button onClick={doSomething}>
    Click me
  </button>
}
```